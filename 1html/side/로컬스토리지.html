<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .inputdiv {
        display: flex;
        flex-direction: column;
      }
      .inBtnArea {
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
      }
      .btnArea {
        display: flex;
        flex-direction: row;
        justify-content: center;
      }
      .btnArea > button {
        margin-left: 0.5rem;
      }
      .tdiv {
        display: flex;
        justify-content: center;
      }
      table {
        border: 1px solid black;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 0.5rem;
        border: 1px solid black;
        border-collapse: collapse;
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <h1>ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í™œìš©</h1>
    <div class="inputdiv">
      ì´ë¦„: <input type="text" class="indata in1" /><br />
      ë‚˜ì´: <input type="text" class="indata in2" /><br />
      ì£¼ì†Œ: <input type="text" class="indata in3" /><br />
      <div class="inBtnArea">
        <button id="data-save">ì €ì¥í•˜ê¸°</button>
      </div>
    </div>
    <hr />
    <hr />
    <div class="btnArea">
      <button id="data-load">ë¶ˆëŸ¬ì˜¤ê¸°</button>
      <button id="data-del">ì‚­ì œí•˜ê¸°</button>
    </div>
    <h3></h3>
    <div class="tdiv">
      <table>
        <thead>
          <th>ID</th>
          <th>ì´ë¦„</th>
          <th>ë‚˜ì´</th>
          <th>ì£¼ì†Œ</th>
        </thead>
        <tbody id="list"></tbody>
      </table>
    </div>
    <script>
      const in1 = document.querySelector(".in1"); // ì…ë ¥1
      const in2 = document.querySelector(".in2"); // ì…ë ¥2
      const in3 = document.querySelector(".in3"); // ì…ë ¥3
      const btnSave = document.querySelector("#data-save"); // ì €ì¥í•˜ê¸° ì‹¤í–‰
      const btnLoad = document.querySelector("#data-load"); // ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤í–‰
      const btnDel = document.querySelector("#data-del"); // ì‚­ì œ ì‹¤í–‰
      const h3 = document.querySelector("h3"); // ê²°ê³¼
      const tableList = document.getElementById("list");
      let upId =
        localStorage.getItem("currentId") != null
          ? localStorage.getItem("currentId")
          : 1;
      const upData = JSON.parse(localStorage.getItem("myData")) ?? [];
      btnSave.addEventListener("click", () => {
        const ori = {
          id: upId++,
          name: in1.value,
          age: in2.value,
          address: in3.value,
        };
        upData.push(ori);
        localStorage.setItem("myData", JSON.stringify(upData));
        localStorage.setItem("currentId", upId);
      });
      btnLoad.addEventListener("click", () => {
        const data = JSON.parse(localStorage.getItem("myData"));
        tableList.innerHTML = " ";
        let tList = "";
        //h3.innerHTML = data ?? "ì €ì¥ì†Œì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
        for (let row of data) {
          tList += `<tr><td>${row.id}</td><td>${row.name}</td><td>${row.age}</td><td>${row.address}</td></tr>`;
        }
        tableList.innerHTML = tList ?? "ì €ì¥ì†Œì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
        /*ì´ êµ¬ë¬¸ì€ JavaScriptì˜ null ë³‘í•© ì—°ì‚°ì (??)ë¥¼ ì‚¬ìš©í•˜ì—¬ tListê°€ null ë˜ëŠ” undefinedì¼ ê²½ìš° "ì €ì¥ì†Œì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."ë¼ëŠ” ë¬¸ìì—´ì„ tableList ìš”ì†Œì˜ innerHTMLì— í• ë‹¹í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.
        êµ¬ì²´ì ìœ¼ë¡œ:
        - tListê°€ null ë˜ëŠ” undefinedê°€ ì•„ë‹ˆë©´ tListì˜ ê°’ì„ tableList.innerHTMLì— í• ë‹¹í•©ë‹ˆë‹¤.
        - tListê°€ null ë˜ëŠ” undefinedì´ë©´ "ì €ì¥ì†Œì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."ë¼ëŠ” ë¬¸ìì—´ì„ tableList.innerHTMLì— í• ë‹¹í•©ë‹ˆë‹¤.
        ì´ë ‡ê²Œ í•˜ë©´ tListê°€ ìœ íš¨í•œ ë°ì´í„°ì¸ì§€ í™•ì¸í•˜ê³ , ê·¸ë ‡ì§€ ì•Šì„ ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì ì ˆí•œ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        ë„ì›€ì´ ë˜ì—ˆê¸¸ ë°”ëë‹ˆë‹¤! ë‹¤ë¥¸ ì§ˆë¬¸ì´ ìˆìœ¼ë©´ ì–¸ì œë“ ì§€ ë§ì”€í•´ ì£¼ì„¸ìš”. ğŸ˜Š
        */
      });
      btnDel.addEventListener("click", () => {
        localStorage.removeItem("myData");
      });
    </script>
  </body>
</html>
