<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous" />
    <script>
     /* function checkSize(input) {
        let limitSize = 10;
        const checklSize = limitSize * 1024 * 1024;
        if (input.file[0].size > 1024*1024) {
          const fileSize = (input.files[0].size / 1024 / 1024).toFixed(2);;
        } else if (input.file[0].size > 1024) {
          const fileSize = input.files[0].size;
        }

        if (input.files[0].size > checklSize ) {
          alert(input.files[0].name + "은 " + fileSize + "MB입니다. 10MB가 초과하였습니다.");  
        } else {
          alert(input.files[0].name + "은 " + fileSize + "MB입니다. 10MB이하 입니다.");  
        }

        console.log(input.files[0].name, input.files[0].size);
        //alert("파일 사이즈가 10MB를 초과합니다.")
      }*/
    </script>
  </head>
  <body>
  <div class="modal" id="modal" tabindex="-1" aria-labelledby="modal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">파일 전송 완료</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p id="modalBody">파일이 정상 전송되었습니다.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
     </div>
    </div>`
    <div class="accordion accordion-flush" id="accordionFlushExample">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#flush-collapseOne"
            aria-expanded="false"
            aria-controls="flush-collapseOne">
            Java
          </button>
        </h2>
        <div
          id="flush-collapseOne"
          class="accordion-collapse collapse"
          data-bs-parent="#accordionFlushExample">
          <div class="accordion-body">
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Odit
            provident sequi, officia illum itaque adipisci hic iste veniam
            doloribus praesentium eligendi modi? Aliquam reprehenderit excepturi
            vel odit ipsam ex, nisi sint veniam voluptas exercitationem quasi
            culpa non, magni amet delectus ea commodi error ad architecto fugiat
            deserunt similique vitae minima!
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#flush-collapseTwo"
            aria-expanded="false"
            aria-controls="flush-collapseTwo">
            Python <span class="badge text-bg-warning">New</span></h6>
          </button>
        </h2>
        <div
          id="flush-collapseTwo"
          class="accordion-collapse collapse"
          data-bs-parent="#accordionFlushExample">
          <div class="accordion-body">
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Impedit
            accusantium perspiciatis dolor, harum molestias at repellat
            distinctio provident, reiciendis animi magni. Delectus, veritatis.
            Officiis aspernatur beatae, sequi aperiam ullam, sit quis a
            doloribus voluptatum cupiditate numquam sed eum necessitatibus
            exercitationem quod. Eaque veritatis sint voluptatibus labore. Id,
            minus deserunt! Quaerat.
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#flush-collapseThree"
            aria-expanded="false"
            aria-controls="flush-collapseThree">
            Javascript
          </button>
        </h2>
        <div
          id="flush-collapseThree"
          class="accordion-collapse collapse"
          data-bs-parent="#accordionFlushExample">
          <div class="accordion-body">
            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Fugiat
            asperiores delectus omnis quis sunt sed maxime, quo dolorum animi
            similique enim, laudantium facere quas quisquam excepturi aliquam
            officiis distinctio quod placeat. Fugit aut at consequatur laborum
            recusandae mollitia sequi iure nobis, libero nulla magni. Officia
            architecto atque quae voluptates distinctio.
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#flush-collapseFour"
            aria-expanded="false"
            aria-controls="flush-collapseFour">
            File UpLoad
          </button>
        </h2>
        <div
          id="flush-collapseFour"
          class="accordion-collapse collapse"
          data-bs-parent="#accordionFlushExample">
          <div class="accordion-body">
            Test UpLoad<br><br>
            <form class="input-group mb-3" action="/up" method="POST" enctype="multipart/form-data"> <!-- 파일 전송시 인코딩 방식 설정-->
                <!-- 업로드 파일 용량 체크-->
                <input type="file" class="form-control" id="inputGroupFile02" name="ufile" onchange="checkSize(this)"> <!-- onchange --><!-- ufile이라는 이름에 담에서 파일 전송-->
                <!-- 모달창 열기, submit하기-->
                <button type="submit" class="btn btn-primary" id="uploadBtn" data-bs-toggle="modal" data-bs-target="#modal" disabled>UpLoad</button>
                <!--<button type="submit" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal" disabled>UpLoad</button>--> <!-- 버튼 submit을 통해 위 설정에 따라 제출-->
            </form>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"></script>
      <script>
        const btnActive = () => document.getElementById("uploadBtn").disabled=false
        const btnDisable = () => document.getElementById("uploadBtn").disabled=true
        function checkSize(input) {
          let limitSize = 10;
          const checklSize = limitSize * 1024 * 1024;
          let fileSize=0;
          if (!!input.files && input.files[0].size > checklSize) {
            fileSize = (input.files[0].size / 1024 / 1024).toFixed(2) + "MBytes";
            alert(input.files[0].name + "은 " + fileSize + "입니다. 10MB가 초과하였습니다.");  
            btnDisable()
          } else {
            if (input.files[0].size > 1024*1024) {
              fileSize = (input.files[0].size / 1024 / 1024).toFixed(2) + "MBytes";
              console.log(fileSize)
            } else if (input.files[0].size > 1024) {
              fileSize = (input.files[0].size / 1024).toFixed(2) + "KBytes";
              console.log(fileSize)
            } else {
              fileSize = input.files[0].size + "Bytes";
              console.log(fileSize)
            }
            alert(input.files[0].name + "은 " + fileSize + "입니다. 10MB이하 입니다.");
            btnActive()
          }
  
          console.log(input.files[0].name, input.files[0].size);
          //alert("파일 사이즈가 10MB를 초과합니다.")
        }
        /*document.querySelector('form').addEventListener('submit', function(event) {
          let input = document.getElementById('inputGroupFile02');
          let file = input.files[0];
          if (file) {
            let fileName = file.name;
            document.getElementById('modalBody').textContent = fileName +'이 업로드 완료되었습니다.';
          }
        });*/
      </script>
  </body>
</html>
